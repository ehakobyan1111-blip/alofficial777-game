<!-- <!DOCTYPE html>
<html lang="hy">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>๐ ีีธึึ ีขีกึีฅีฌีธึ ีญีกีฒ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="h1">
        <h1>๐ ิธีถีฟึีซึ ีดีฅีฏ ีฟีธึึ</h1>
<p id="message"></p>
    </div>

<div class="grid">
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
</div>

<button id="refreshBtn">ิฝีกีฒีกีฌ ีถีธึีซึ ๐</button>

  <script>
  const boxes = document.querySelectorAll(".box");
  const message = document.getElementById("message");
  const refreshBtn = document.getElementById("refreshBtn");

  let gameOver = false;
  let winAmount = ""; // ๐ฅ server-ีซึ ีฏีฃีก
  let winIndex = Math.floor(Math.random() * boxes.length);

  // fetch reward from server
  fetch("http://localhost:3001/game/reward")
    .then(res => res.json())
    .then(data => {
      winAmount = data.reward;
      console.log("Reward from server:", winAmount);
      startGame(); // โ ีญีกีฒีจ ีฝีฏีฝีธึีด ีฅีถึ ีิปิฑีี ีฐีซีดีก
    });

  function startGame() {
    boxes.forEach(box => {
      box.style.backgroundImage = "url('img/cammon.jpg')";
    });

    boxes.forEach((box, index) => {
      box.addEventListener("click", () => {
        if (gameOver) return;

        gameOver = true;
        box.style.backgroundImage = "none";
        box.style.backgroundColor = "#fff";
        box.style.color = "#000";
        box.style.fontSize = "18px";
        box.style.fontWeight = "bold";

        if (index === winIndex) {
          box.textContent = winAmount;
          message.textContent = `๐ ีีถีธึีฐีกีพีธึีธึีด ีฅีถึ, ีคีธึ ีฐีกีฒีฉีฅึีซึ ${winAmount}`;
        } else {
          box.textContent = "X";
          message.textContent = "โ ีีกีพีธึ, ีคีธึ ีนีฐีกีฒีฉีฅึีซึ";
        }
      });
    });
  }

  refreshBtn.addEventListener("click", () => {
    location.reload();
  });
</script>

<link rel="stylesheet" href="admin.html">
</body>
</html> -->







<!DOCTYPE html>
<html lang="hy">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>๐ ีีธึึ ีขีกึีฅีฌีธึ ีญีกีฒ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="h1">
    <h1>๐ ิธีถีฟึีซึ ีดีฅีฏ ีฟีธึึ</h1>
    <p id="message"></p>
  </div>

  <div class="grid">
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
  <div class="box" style="background-image:url('img/cammon.jpg')"></div>
</div>

  <button id="refreshBtn">ิฝีกีฒีกีฌ ีถีธึีซึ ๐</button>

  <!-- โ ีิปิฑีี ีิติฟ SCRIPT -->
  <script>
    const boxes = document.querySelectorAll(".box");
    const message = document.getElementById("message");
    const refreshBtn = document.getElementById("refreshBtn");

    let gameOver = false;
    let winAmount = "";
    let winIndex = Math.floor(Math.random() * boxes.length);

    // ๐น ิณีธึีดีกึีจ ีฃีกีฌีซีฝ ีง server-ีซึ (Admin Panel)
    fetch("http://localhost:3001/game/reward")
      .then(res => res.json())
      .then(data => {
        winAmount = data.reward;
        startGame();
      })
      .catch(err => {
        console.error(err);
        message.textContent = "โ Server-ีซ ีฐีฅีฟ ีฏีกีบ ีนีฏีก";
      });

    function startGame() {
      gameOver = false;
      message.textContent = "";

      boxes.forEach((box, index) => {
        box.textContent = "";
        box.style.backgroundImage = "url('img/cammon.jpg')";
        box.style.backgroundColor = "";
        box.style.color = "#000";

        // โ MOBILE + PC FIX
        box.onpointerdown = (e) => {
          e.preventDefault();
          if (gameOver) return;

          gameOver = true;
          box.style.backgroundImage = "none";
          box.style.backgroundColor = "#fff";
          box.style.fontSize = "18px";
          box.style.fontWeight = "bold";

          if (index === winIndex) {
            box.textContent = winAmount;
            message.textContent = `๐ ีีถีธึีฐีกีพีธึีธึีด ีฅีถึ, ีคีธึ ีฐีกีฒีฉีฅึีซึ ${winAmount}`;
          } else {
            box.textContent = "X";
            message.textContent = "โ ีีกีพีธึ, ีคีธึ ีนีฐีกีฒีฉีฅึีซึ";
          }
        };
      });
    }

    refreshBtn.onclick = () => location.reload();
  </script>

</body>
</html>
